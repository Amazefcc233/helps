# 插件 - 全局黑名单（开源）

## 介绍

这是一款能让机器人屏蔽人和群的插件。 
看这个人不顺眼？屏蔽！
那个群滥用你的服务？一键退群并拉黑！

本插件使用了最蠢的ini当数据库。（因为其他的啥也不会
当fcc学会了sqlite和json等等这类东西之后，就会放弃ini的！

 - 创建时间：2019.06.14
 - 当前版本：1.0.4
 - 服务范围：私聊&QQ群&讨论组
 - 分配机器人：
   - [APICenter](api_main.md)
   - [搜图姬](picfinder.md)
 
## 功能

普通吃瓜群众：
  - 无需干也干不了任何事情。被屏蔽了你自己也解除不了。

对于插件管理员：
  - 有一些内容需要了解。
  
  ### 命令
    - ```!!ban-g=<群号>!!``` : 把该群拉入黑名单
	- ```!!ban-u=<QQ号>!!``` : 把该QQ拉入黑名单
	- ```!!quit-g=<群号>!!``` : 退出此群并将其拉入黑名单（v1.0.1新增）
	- ```!!quit-d=<讨论组>!!``` : 退出此讨论组并将其拉入黑名单（v1.0.1新增）
	- ```!!quit-add!!``` : 增加单次命令退群授权
	- ```!!update```或```!!update banlist-ini``` : 检查更新（v1.0.3新增，前一个将检查所有fcc编写插件的更新，后一个将只检查全局黑名单的更新）
	
  ### 配置文件
    本插件仅含有一份配置文件，位于```data/app/com.amazefcc233.banlist-ini/banlist.ini```
	```ini
    [config]
	version=1.0.3    ; 当前插件版本号，请勿修改本行内容，否则可能导致部分配置文件被初始化！
    admin_qq=3051467276    ; 机器人管理QQ号
    always-command_quit=0    ; 永久授权退群/讨论组并拉入黑名单，0为禁用，1为启用
    auto-command_quit=0    ; 单次授权退群/讨论组并拉入黑名单，插件重启后失效，此栏不需要任何改动
    ban_invite_from_banned_group=0    ; 是否拒绝来自已被拉黑群的入群邀请，0为禁用，1为启用
    ban_invite_from_banned_qq=0    ; 是否拒绝来自已被拉黑QQ的好友申请/入群邀请，0为禁用，1为启用
    [QQ]
    10001=1    ; 被拉入黑名单的QQ号，1代表已被拉黑。解除拉黑请删除此行
    [group]
    12345=1    ; 被拉入黑名单的群号/讨论组，1代表已被拉黑。解除拉黑请删除此行
	```
  
## 更新计划

  当学会其他存储数据的方式的时候会有更新计划的。
  
## 已知bug

  - 由于mirai设计等原因，本插件仅适用于在MiraiNative中的消息拦截。其他插件暂不支持拦截。

## 下载

  !> 正在适配mirai，预计国庆发布，敬请期待哦哦哦！  
  
  > v1.0.4 - [插件下载](https://cqp.cc/t/43675) | [源码下载](https://cqp.cc/t/43675)  
  
  以下是过时的存档版本。请注意以往版本可能会存在严重的bug。因此不推荐您进行下载。
  
  > v1.0.3 - [插件下载](https://cqp.cc/t/43675) | 该版本源码~~丢了~~  
  
  > v1.0.2 - [插件下载](https://ro.amazefcc233.com/dl/plugins/banlist-ini/1.0.2/com.amazefcc233.banlist-ini.cpk) | 不提供以往版本的源码下载  
  
  > v1.0.1 - [插件下载](https://ro.amazefcc233.com/dl/plugins/banlist-ini/1.0.1/com.amazefcc233.banlist-ini.cpk) | 此版本下源码未公布  
  
## 更新日志
  
  > ### v1.0.4
  
  - 修复了一个严重的入群识别bug
  
  > ### v1.0.3
  
  - 增加升级命令。您可使用```!!update```或```!!update banlist-ini```来检测新版本。
    （前一个命令将会检测所有fcc所写插件，后一个命令将只检测全局黑名单插件）
  - 配置文件稍有改动，但您无需任何操作。
  
  > ### v1.0.2
  
  - 修复了管理员在使用命令时可能会与其他私聊应用冲突的问题
  
  > ### v1.0.1
  
  !> 此版本的配置文件发生巨大变化。为保证正常使用请删除data/app/com.amazefcc233.banlist-ini/banlist.ini文件！    
    
  - 可以使用命令一键退群并拉黑该群
  - 已被拉黑的群再邀请机器人时可拒绝请求（可调）
  - 已被拉黑的人添加好友/邀请机器人入群可拒绝请求（可调）
  
  
  > ### v1.0.0
  
  - 初代版本
  